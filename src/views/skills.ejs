<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web-Skill Tree : Electronics</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

<header>
    <div class="navbar">
        <span>¡Bienvenido, <%=user.username%> ! | </span>
        <span>Árbol de habilidades:</span>

        <a href="/skills">Electronics</a>
        <span> | </span>
        <a href="/leaderboard">Clasificación</a>
        <span> | </span>
        <a href="/about">Acerca de</a>
        <span> | </span>
        <a href="/users/logout">Cerrar sesión</a>
        <span> | </span>
        <% if (user.isAdmin) { %>
            <div class="dropdown">
                <a href="#" id="admin-link">Panel de administración</a>
                <div class="dropdown-menu" id="admin-menu">
                    <a href="/admin/manage-badges">Manage Badges</a>
                    <a href="/admin/users">Manage Users</a>
                </div>
            </div>
        <% } %>
    </div>
</header>

<h1>ELECTRONICS</h1>

<% if (user.isAdmin) { %>
    <button onclick="window.location.href='/skills/electronics/add'" class="btn btn-add-skill">Añadir Nueva Skill</button>
<% } %>

    <div class="svg-container">
        <% skills.forEach(skill => { %>
            <div class="svg-wrapper" data-id="<%= skill.id %>">
                <svg width="100" height="100" viewBox="0 0 100 100">
                    <polygon id="hexagon-<%= skill.id %>" points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5" class="hexagon" />
                    <text x="50%" y="20%" text-anchor="middle" fill="black" font-size="10">
                        <%- skill.text.split('\n\n\n').map(line => `<tspan x="50%" dy="1.2em" font-weight="bold">${line}</tspan>`).join('') %>
                    </text>
                    <image x="35%" y="60%" width="30" height="30" href="./electronics/icons/icon<%= skill.id %>.svg" />
                </svg>
                <div class="icons">
                    <%if (user.isAdmin) { %>
                        <!-- <span class="icon pencil" title="Editar" onclick="window.location.href='edit.html'">✏️</span> -->

                        <span class="icon pencil" title="Editar" onclick="window.location.href='/skills/electronics/edit/<%= skill.id %>'">✏️</span>
                    <% } %>
                        <span class="icon notebook" title="Ver Competencia" onclick="window.location.href='/competencia.html?id=<%= skill.id %>'">📓</span>
                </div>
            </div>
        <% }); %>
    </div>

    <div id="description-message"></div>

</body>
</html>
